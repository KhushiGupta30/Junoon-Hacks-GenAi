<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Speech Recognition Test</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background-color: #f0f0f0; }
        button { font-size: 1.2rem; padding: 1rem 2rem; cursor: pointer; }
        #status { margin-top: 1rem; font-weight: bold; }
        #error { color: red; }
    </style>
</head>
<body>
    <button id="micButton">Click and Speak</button>
    <p id="status">Status: Idle</p>
    <p id="error"></p>
    <p id="transcript"></p>

    <script>
        const micButton = document.getElementById('micButton');
        const statusEl = document.getElementById('status');
        const errorEl = document.getElementById('error');
        const transcriptEl = document.getElementById('transcript');

        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

        if (!SpeechRecognition) {
            statusEl.textContent = 'Speech Recognition not supported in this browser.';
        } else {
            const recognition = new SpeechRecognition();
            recognition.lang = 'en-US';
            recognition.interimResults = false;

            recognition.onstart = () => {
                statusEl.textContent = 'Listening...';
                errorEl.textContent = '';
                transcriptEl.textContent = '';
            };

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                transcriptEl.textContent = 'You said: ' + transcript;
            };

            recognition.onerror = (event) => {
                console.error('Speech recognition error:', event.error);
                errorEl.textContent = 'ERROR: ' + event.error;
            };

            recognition.onend = () => {
                statusEl.textContent = 'Status: Idle';
            };

            micButton.addEventListener('click', () => {
                try {
                    recognition.start();
                } catch(e) {
                    errorEl.textContent = 'Error starting recognition: ' + e.message;
                }
            });
        }
    </script>
</body>
</html>